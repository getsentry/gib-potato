{"version":3,"file":"sdk.js","sources":["../../src/sdk.ts"],"sourcesContent":["import { init as browserInit, SDK_VERSION } from '@sentry/browser';\nimport { getGlobalObject, logger } from '@sentry/utils';\n\nimport { DEFAULT_HOOKS } from './constants';\nimport { attachErrorHandler } from './errorhandler';\nimport { createTracingMixins } from './tracing';\nimport { Options, TracingOptions, Vue } from './types';\n\nconst DEFAULT_CONFIG: Options = {\n  Vue: getGlobalObject<{ Vue: Vue }>().Vue,\n  attachProps: true,\n  logErrors: false,\n  hooks: DEFAULT_HOOKS,\n  timeout: 2000,\n  trackComponents: false,\n  _metadata: {\n    sdk: {\n      name: 'sentry.javascript.vue',\n      packages: [\n        {\n          name: 'npm:@sentry/vue',\n          version: SDK_VERSION,\n        },\n      ],\n      version: SDK_VERSION,\n    },\n  },\n};\n\n/**\n * Inits the Vue SDK\n */\nexport function init(\n  config: Partial<Omit<Options, 'tracingOptions'> & { tracingOptions: Partial<TracingOptions> }> = {},\n): void {\n  const options = {\n    ...DEFAULT_CONFIG,\n    ...config,\n  };\n\n  browserInit(options);\n\n  if (!options.Vue && !options.app) {\n    __DEBUG_BUILD__ &&\n      logger.warn(\n        'Misconfigured SDK. Vue specific errors will not be captured.\\n' +\n          'Update your `Sentry.init` call with an appropriate config option:\\n' +\n          '`app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).',\n      );\n    return;\n  }\n\n  if (options.app) {\n    const apps = Array.isArray(options.app) ? options.app : [options.app];\n    apps.forEach(app => vueInit(app, options));\n  } else if (options.Vue) {\n    vueInit(options.Vue, options);\n  }\n}\n\nconst vueInit = (app: Vue, options: Options): void => {\n  attachErrorHandler(app, options);\n\n  if ('tracesSampleRate' in options || 'tracesSampler' in options) {\n    app.mixin(\n      createTracingMixins({\n        ...options,\n        ...options.tracingOptions,\n      }),\n    );\n  }\n};\n"],"names":[],"mappings":";;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;"}